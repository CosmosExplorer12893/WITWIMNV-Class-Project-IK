<!-- Here is the work for my class project: Where in the World is My Next Vacation? -->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Where in the World is My Next Vacation?</title>
  <style>
    :root{
      --bg:#e9f6ff; /* light blue */
      --card:#ffffff;
      --accent:#0077cc; /* primary blue */
      --accent-strong:#005fa3;
      --muted:#5b6b7a;
      --glass: rgba(255,255,255,0.7);
      --success:#07c;
      --danger:#e02424;
      color-scheme: light;
      --radius:12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#f8fbff);color:#072035}

    /* dark mode variables */
    .dark{--bg:#071428;--card:#071a2b;--accent:#4fb3ff;--accent-strong:#3aa0ff;--muted:#9fb6cf;color-scheme: dark}

    /* container */
    .app{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;gap:14px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo svg{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-strong));padding:8px;box-shadow:0 8px 20px rgba(2,6,23,0.08)}
    h1{margin:0;font-size:1.5rem}
    p.lead{margin:0;color:var(--muted);font-size:0.95rem}

    /* card */
    .card{background:var(--card);border-radius:var(--radius);padding:18px;box-shadow:0 8px 28px rgba(2,6,23,0.06);}
    .spaced{margin-top:14px}

    /* form layout vertical */
    form{display:flex;flex-direction:column;gap:12px}
    label{font-weight:700;margin-bottom:6px}
    select,input[type=text]{padding:12px;border-radius:10px;border:1px solid rgba(7,32,53,0.06);background:transparent}

    .actions{display:flex;gap:12px;justify-content:flex-end;margin-top:6px}
    .btn{padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(7,32,53,0.06);color:var(--accent)}

    /* two 'pages' */
    .page{display:none}
    .page.active{display:block}

    /* result layout */
    .result-grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:12px}
    .map-wrap{position:relative;border-radius:12px;overflow:hidden;border:1px solid rgba(7,32,53,0.06)}
    .map-wrap img{width:100%;height:auto;display:block;transition:transform 0.35s ease}
    .map-controls{display:flex;gap:8px;justify-content:flex-end;margin-top:8px}

    /* interactive marker */
    .marker{position:absolute;transform:translate(-50%,-100%);width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;color:white}
    .marker.star{background:var(--danger);box-shadow:0 8px 18px rgba(224,36,36,0.24);font-size:18px}
    .marker.pulse{animation:ping 1.6s infinite}
    @keyframes ping{0%{transform:translate(-50%,-100%) scale(1)}50%{transform:translate(-50%,-100%) scale(1.25)}100%{transform:translate(-50%,-100%) scale(1)} }

    .info{padding:12px}
    .stat{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed rgba(7,32,53,0.04)}
    .currency-table{margin-top:12px;border-radius:8px;border:1px solid rgba(7,32,53,0.04);padding:10px;background:linear-gradient(180deg,rgba(255,255,255,0.9),transparent)}

    /* footer controls */
    footer{display:flex;justify-content:space-between;align-items:center;margin-top:18px;color:var(--muted);font-size:0.95rem}
    .toggle{display:flex;align-items:center;gap:8px}
    .switch{width:44px;height:24px;background:rgba(7,32,53,0.08);border-radius:999px;padding:3px;display:flex;align-items:center;cursor:pointer}
    .switch .knob{width:18px;height:18px;border-radius:50%;background:white;box-shadow:0 6px 14px rgba(2,6,23,0.12);transition:transform 0.22s}
    .switch.on{background:linear-gradient(90deg,var(--accent),var(--accent-strong))}
    .switch.on .knob{transform:translateX(20px)}

    /* responsiveness */
    @media (max-width:900px){.result-grid{grid-template-columns:1fr}.map-wrap{height:320px}}

  </style>
</head>
<body>
  <div class="app">
    <header style="margin-bottom:12px">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="logo">
            <!-- unique engaging logo: paper airplane + globe in SVG -->
            <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <defs>
                <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#6ad1ff"/><stop offset="1" stop-color="#0077cc"/></linearGradient>
              </defs>
              <rect width="64" height="64" rx="12" fill="url(#g1)" />
              <g transform="translate(6,6)">
                <path d="M2 30 L50 6 L34 28 L46 42 L26 28 L2 30 Z" fill="#fff" opacity="0.95"/>
                <circle cx="36" cy="36" r="10" fill="rgba(255,255,255,0.12)" stroke="white" stroke-opacity="0.08"/>
                <path d="M40 32 L44 28" stroke="#fff" stroke-width="1.8" stroke-linecap="round"/>
              </g>
            </svg>
          </div>
          <div>
            <h1>Where in the World is My Next Vacation?</h1>
            <p class="lead">Answer a few questions and we'll recommend a perfect getaway.</p>
          </div>
        </div>
      </div>
    </header>

    <!-- Page 1: the vertical form -->
    <section id="page1" class="page active">
      <main class="card">
        <form id="finderForm">
          <div>
            <label for="hemisphere">What hemisphere of the world would you like to go to?</label>
            <select id="hemisphere" required>
              <option value="">Select a hemisphere</option>
              <option>Northern</option>
              <option>Southern</option>
              <option>Eastern</option>
              <option>Western</option>
            </select>
          </div>

          <div>
            <label for="climate">What climate/type of weather would you like?</label>
            <select id="climate" required>
              <option value="">Select a climate</option>
              <option>Warmer</option>
              <option>Cooler</option>
            </select>
          </div>

          <div>
            <label for="season">What season of the year would you be going on this vacation?</label>
            <select id="season" required>
              <option value="">Select a season</option>
              <option>Winter</option>
              <option>Spring</option>
              <option>Summer</option>
              <option>Fall</option>
            </select>
          </div>

          <div>
            <label for="duration">How long would you like to stay?</label>
            <select id="duration" required>
              <option value="">Select duration</option>
              <option>A day</option>
              <option>A few days</option>
              <option>A week</option>
              <option>2 weeks</option>
              <option>3 weeks</option>
            </select>
          </div>

          <div>
            <label for="type">Specific type of place?</label>
            <select id="type" required>
              <option value="">Select place type</option>
              <option>Theme Park</option>
              <option>Resort</option>
              <option>Carnival</option>
              <option>None</option>
            </select>
          </div>

          <div>
            <label for="budget">How much do you generally want to spend on this vacation?</label>
            <select id="budget" required>
              <option value="">Select budget</option>
              <option>&lt;$1000</option>
              <option>$1000-$2000</option>
              <option>$2000-$3000</option>
              <option>$3000-$4000</option>
              <option>$4000-$5000</option>
              <option>$5000-$10000</option>
              <option>&gt;$10000</option>
            </select>
          </div>

          <div class="spaced actions">
            <button type="button" id="resetBtn" class="btn btn-ghost">Reset</button>
            <button type="submit" class="btn btn-primary">Show My Vacation</button>
          </div>
        </form>
      </main>
    </section>

    <!-- Page 2: Results -->
    <section id="page2" class="page">
      <main class="card">
        <div style="text-align:center;margin-bottom:10px">
          <div style="font-weight:900;font-size:1.6rem" id="destTitle">Your destination</div>
          <div id="destSub" style="color:var(--muted);margin-top:6px"></div>
        </div>

        <div class="result-grid">
          <div>
            <div class="map-wrap" id="mapWrap" style="min-height:420px">
              <!-- interactive map: using the provided world image and CSS-based interactive techniques -->
              <img id="worldMap" src="https://www.mapsofworld.com/maps/world-political-maps.jpg" alt="World map">
            </div>
            <div class="map-controls">
              <button id="zoomIn" class="btn btn-ghost">Zoom In</button>
              <button id="zoomOut" class="btn btn-ghost">Zoom Out</button>
              <button id="resetMap" class="btn btn-ghost">Reset Map</button>
            </div>

            <div style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap">
              <div class="card info" style="flex:1">
                <div style="font-weight:800">Destination Info</div>
                <div id="destDetails" style="color:var(--muted);margin-top:8px"></div>
              </div>

              <div class="card info" style="width:260px">
                <div style="font-weight:800">Estimated Cost</div>
                <div id="costDetails" style="color:var(--muted);margin-top:8px"></div>
              </div>
            </div>
          </div>

          <aside>
            <div class="card info">
              <div style="font-weight:800">Quick Stats</div>
              <div class="stat"><div>Length</div><div id="statDuration"></div></div>
              <div class="stat"><div>Climate</div><div id="statClimate"></div></div>
              <div class="stat"><div>Season</div><div id="statSeason"></div></div>
              <div class="stat"><div>Type</div><div id="statType"></div></div>
              <div class="stat"><div>Currency</div><div id="statCurrency"></div></div>

              <div class="currency-table" id="currencyTable">
                <strong>Conversion (1 USD →)</strong>
                <div id="convList" style="margin-top:8px;color:var(--muted)"></div>
              </div>

              <div style="margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:flex-end">
                <button id="backBtn" class="btn">Edit Answers</button>
                <button id="newBtn" class="btn btn-primary">Find Another</button>
              </div>
            </div>
          </aside>
        </div>

      </main>
    </section>

    <footer>
      <div style="font-size:0.9rem;color:var(--muted)">Made with ♥ — Where in the World App</div>
      <div class="toggle">
        <div style="font-size:0.9rem;color:var(--muted)">Dark mode</div>
        <div id="darkSwitch" class="switch" role="button" aria-pressed="false">
          <div class="knob"></div>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // -----------------------------
    // Refactored single-file app implementing requested features
    // Page toggles, vertical layout, interactive map (CSS transform zoom & marker focus), dark mode toggle
    // Only shows relevant currency conversion for chosen destination
    // -----------------------------

    // Destinations database (kept concise for readability)
    const DESTINATIONS = [
      {name:'Reykjavik, Iceland',hemisphere:['Northern','Eastern','Western'],climate:'Cooler',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week'],types:['None','Resort'],avgPerDay:230,country:'Iceland',currency:'ISK',coords:{x:50,y:18},features:['Northern Lights','Geothermal spas','Black sand beaches','Volcano landscapes','Midnight sun']},
      {name:'Cancún, Mexico',hemisphere:['Northern','Western'],climate:'Warmer',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week','2 weeks'],types:['Resort','Theme Park','None'],avgPerDay:180,country:'Mexico',currency:'MXN',coords:{x:38,y:33},features:['White sand beaches','Mayan ruins','All-inclusive resorts','Snorkeling & diving','Nightlife']},
      {name:'Paris, France',hemisphere:['Northern','Eastern','Western'],climate:'Cooler',seasons:['Spring','Summer','Fall','Winter'],durations:['A few days','A week'],types:['None','Carnival'],avgPerDay:240,country:'France',currency:'EUR',coords:{x:48,y:22},features:['Eiffel Tower','World-class museums','Historic architecture','Cafés & cuisine','Romantic atmosphere']},
      {name:'Tokyo, Japan',hemisphere:['Northern','Eastern'],climate:'Warmer',seasons:['Spring','Summer','Fall'],durations:['A few days','A week','2 weeks'],types:['Theme Park','None'],avgPerDay:260,country:'Japan',currency:'JPY',coords:{x:78,y:30},features:['Anime & pop culture','Advanced tech','Cherry blossoms','Temples & shrines','Theme parks']},
      {name:'Cape Town, South Africa',hemisphere:['Southern','Eastern','Western'],climate:'Cooler',seasons:['Summer','Fall','Spring'],durations:['A few days','A week','2 weeks'],types:['None','Resort'],avgPerDay:140,country:'South Africa',currency:'ZAR',coords:{x:60,y:73},features:['Table Mountain','Beaches','Wildlife','Wine regions','Outdoor adventure']},
      {name:'Bali, Indonesia',hemisphere:['Southern','Eastern'],climate:'Warmer',seasons:['Summer','Fall','Spring'],durations:['A few days','A week','2 weeks','3 weeks'],types:['Resort','None'],avgPerDay:110,country:'Indonesia',currency:'IDR',coords:{x:82,y:54},features:['Tropical beaches','Rainforests','Rice terraces','Resorts','Snorkeling']},
      {name:'Queenstown, New Zealand',hemisphere:['Southern','Eastern','Western'],climate:'Cooler',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week','2 weeks'],types:['Resort','None'],avgPerDay:200,country:'New Zealand',currency:'NZD',coords:{x:91,y:86},features:['Adventure sports','Lakes','Mountains','Nature trails','Scenic views']},
      {name:'Dubai, UAE',hemisphere:['Northern','Eastern'],climate:'Warmer',seasons:['Winter','Spring','Fall'],durations:['A few days','A week','2 weeks'],types:['Resort','Theme Park'],avgPerDay:320,country:'UAE',currency:'AED',coords:{x:66,y:32},features:['Luxury resorts','Skyscrapers','Desert safaris','Theme parks','Shopping malls']},
      {name:'Machu Picchu, Peru',hemisphere:['Southern','Western'],climate:'Cooler',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week'],types:['None'],avgPerDay:150,country:'Peru',currency:'PEN',coords:{x:24,y:51},features:['Ancient ruins','Mountain hiking','Cultural heritage','Scenic valleys','Unique architecture']},
      {name:'Orlando, USA (Theme Parks)',hemisphere:['Northern','Western'],climate:'Warmer',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week','2 weeks'],types:['Theme Park','Resort'],avgPerDay:300,country:'United States',currency:'USD',coords:{x:42,y:36},features:['Disney World','Universal Studios','Water parks','Warm weather','Resorts']},
      {name:'Santorini, Greece',hemisphere:['Northern','Eastern','Western'],climate:'Warmer',seasons:['Spring','Summer','Fall'],durations:['A few days','A week'],types:['Resort','None'],avgPerDay:210,country:'Greece',currency:'EUR',coords:{x:54,y:29},features:['White-washed villages','Sunset views','Mediterranean beaches','Romantic setting','Volcanic cliffs']},
      {name:'Rio de Janeiro, Brazil',hemisphere:['Southern','Western','Eastern'],climate:'Warmer',seasons:['Summer','Fall','Spring'],durations:['A few days','A week','2 weeks'],types:['Carnival','Resort','None'],avgPerDay:160,country:'Brazil',currency:'BRL',coords:{x:32,y:61},features:['Carnival','Beaches','Mountains','Nightlife','Christ the Redeemer']},
      {name:'Vancouver, Canada',hemisphere:['Northern','Western','Eastern'],climate:'Cooler',seasons:['Winter','Spring','Summer','Fall'],durations:['A few days','A week'],types:['None','Resort'],avgPerDay:220,country:'Canada',currency:'CAD',coords:{x:28,y:20},features:['Mountain views','Harborfront','Nature parks','Mild climate','Outdoor culture']}
    ];

    const EXCHANGE_RATES = { 'EUR': 0.92,'GBP': 0.78,'JPY': 155,'MXN': 18.8,'CAD': 1.36,'AUD': 1.58,'INR': 83.5,'CNY': 7.27,'NZD': 1.65,'ZAR': 18.1,'BRL': 5.12,'PEN': 3.80,'AED': 3.67,'IDR': 15600,'USD': 1 };

    const DURATION_DAYS = {'A day':1,'A few days':3,'A week':7,'2 weeks':14,'3 weeks':21};

    // DOM
    const form = document.getElementById('finderForm');
    const page1 = document.getElementById('page1');
    const page2 = document.getElementById('page2');
    const resultTitle = document.getElementById('destTitle');
    const destSub = document.getElementById('destSub');
    const destDetails = document.getElementById('destDetails');
    const costDetails = document.getElementById('costDetails');
    const convList = document.getElementById('convList');
    const statDuration = document.getElementById('statDuration');
    const statClimate = document.getElementById('statClimate');
    const statSeason = document.getElementById('statSeason');
    const statType = document.getElementById('statType');
    const statCurrency = document.getElementById('statCurrency');
    const worldMap = document.getElementById('worldMap');
    const mapWrap = document.getElementById('mapWrap');

    // map state
    let mapScale = 1;
    let currentMarker = null;

    function showPage(which){
      document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
      document.getElementById(which).classList.add('active');
    }

    function clearMarker(){
      const old = document.querySelectorAll('.marker'); old.forEach(n=>n.remove());
      currentMarker = null;
    }

    document.getElementById('resetBtn').addEventListener('click',()=>{form.reset();});

    document.getElementById('backBtn').addEventListener('click',()=>{showPage('page1');clearMarker();mapReset();});
    document.getElementById('newBtn').addEventListener('click',()=>{form.reset();showPage('page1');clearMarker();mapReset();});

    // zoom controls
    document.getElementById('zoomIn').addEventListener('click',()=>{mapScale = Math.min(2.5,mapScale + 0.25); worldMap.style.transform = `scale(${mapScale})`;});
    document.getElementById('zoomOut').addEventListener('click',()=>{mapScale = Math.max(1, mapScale - 0.25); worldMap.style.transform = `scale(${mapScale})`;});
    document.getElementById('resetMap').addEventListener('click',mapReset);
    function mapReset(){mapScale=1;worldMap.style.transform=`scale(1)`;mapWrap.scrollTop=0;mapWrap.scrollLeft=0;}

    function budgetFits(budgetLabel,totalUSD){
      if(budgetLabel === '<$1000') return totalUSD < 1000;
      if(budgetLabel === '$1000-$2000') return totalUSD >=1000 && totalUSD <=2000;
      if(budgetLabel === '$2000-$3000') return totalUSD >=2000 && totalUSD <=3000;
      if(budgetLabel === '$3000-$4000') return totalUSD >=3000 && totalUSD <=4000;
      if(budgetLabel === '$4000-$5000') return totalUSD >=4000 && totalUSD <=5000;
      if(budgetLabel === '$5000-$10000') return totalUSD >=5000 && totalUSD <=10000;
      if(budgetLabel === '>$10000') return totalUSD > 10000;
      return false;
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const answers = {hemisphere:document.getElementById('hemisphere').value,climate:document.getElementById('climate').value,season:document.getElementById('season').value,duration:document.getElementById('duration').value,type:document.getElementById('type').value,budget:document.getElementById('budget').value};

      const scored = DESTINATIONS.map(dest=>{
        let score=0;
        if(dest.hemisphere.includes(answers.hemisphere)) score+=3;
        if(dest.climate===answers.climate) score+=2;
        if(dest.seasons.includes(answers.season)) score+=2;
        if(dest.durations.includes(answers.duration)) score+=1.5;
        if(dest.types.includes(answers.type)) score+=1.5;
        const days = DURATION_DAYS[answers.duration] || 3;
        const estTotal = dest.avgPerDay * days;
        if(budgetFits(answers.budget, estTotal)) score+=2;
        return {...dest,score,estTotal};
      });

      scored.sort((a,b)=>b.score - a.score || a.estTotal - b.estTotal);
      const pick = scored[0];
      if(!pick) return alert('No matches — try different options');
      showResult(pick,answers);
    });

    function showResult(dest,answers){
      // title & subtitle
      resultTitleText = dest.name;
      resultTitleText = dest.name;
      resultTitle = document.getElementById('destTitle');
      resultTitle.textContent = dest.name;
      destSub.textContent = `${dest.country} — Top features listed below`;

      // details & features
      destDetails.innerHTML = `Country: <strong>${dest.country}</strong><br>Best seasons: ${dest.seasons.join(', ')}<br><br><strong>Top features:</strong><ol>${dest.features.slice(0,5).map(f=>`<li>${f}</li>`).join('')}</ol>`;

      // compute costs
      const days = DURATION_DAYS[answers.duration] || 3;
      const baseCost = dest.avgPerDay * days; // local spending
      const flightEstimate = estimateFlightCost(dest.country);
      const totalEst = Math.round(baseCost + flightEstimate);

      costDetails.innerHTML = `Local spending (stay + food + activities): <strong>$${baseCost.toLocaleString()}</strong><br>Travel / flight cost: <strong>$${flightEstimate.toLocaleString()}</strong><hr style="margin:8px 0"><div style="font-weight:800">Estimated total: $${totalEst.toLocaleString()}</div>`;

      // quick stats
      statDuration.textContent = answers.duration;
      statClimate.textContent = answers.climate;
      statSeason.textContent = answers.season;
      statType.textContent = answers.type;
      statCurrency.textContent = dest.currency;

      // currency conversions: show only relevant currency
      convList.innerHTML = '';
      const code = dest.currency || 'USD';
      const rate = EXCHANGE_RATES[code] || null;
      if(rate){
        convList.innerHTML = `1 USD → ${rate.toLocaleString()} ${code}`;
      } else {
        convList.innerHTML = `1 USD → 1 ${code} (rate not available)`;
      }

      // map marker
      clearMarker();
      addMarker(dest.coords.x,dest.coords.y,dest.name);

      // show page 2
      showPage('page2');

      // attempt to center marker by scrolling
      setTimeout(()=>{
        centerMapOnPercent(dest.coords.x, dest.coords.y);
      },300);
    }

    function estimateFlightCost(country){
      const regionCosts = {'United States':300,'Canada':400,'Mexico':500,'France':800,'Japan':1200,'India':1100,'Brazil':900,'Australia':1500,'New Zealand':1600,'Indonesia':1200,'UAE':900,'Peru':900,'Iceland':900,'South Africa':1000}
      return regionCosts[country] || 1000;
    }

    function addMarker(xPercent,yPercent,label){
      const wrap = mapWrap;
      const marker = document.createElement('div');
      marker.className='marker star pulse';
      marker.style.left = xPercent + '%';
      marker.style.top = yPercent + '%';
      marker.title = label;
      marker.innerHTML = '★';
      wrap.appendChild(marker);
      currentMarker = marker;

      marker.addEventListener('click',()=>{
        // quick bounce effect
        marker.style.transform = 'translate(-50%,-100%) scale(1.2)';
        setTimeout(()=>marker.style.transform='translate(-50%,-100%) scale(1)',220);
      });

      marker.addEventListener('mouseenter',()=>{
        const t = document.createElement('div');
        t.className='tip';
        t.style.position='absolute';
        t.style.left='calc(' + xPercent + '% + 14px)';
        t.style.top='calc(' + yPercent + '% - 8px)';
        t.style.background= 'var(--card)';
        t.style.padding='8px 10px';
        t.style.borderRadius='8px';
        t.style.boxShadow='0 8px 20px rgba(2,6,23,0.08)';
        t.textContent = label;
        t.id='tmpTip';
        wrap.appendChild(t);
      });

      marker.addEventListener('mouseleave',()=>{const t=document.getElementById('tmpTip');if(t) t.remove();})
    }

    // center map box so the percentage point is visible; crude approach using scroll
    function centerMapOnPercent(xPercent,yPercent){
      // dimensions
      const img = worldMap;
      const wrap = mapWrap;
      const rect = img.getBoundingClientRect();
      const wrapRect = wrap.getBoundingClientRect();
      // compute pixel target within image
      const targetX = (xPercent/100) * img.width * mapScale;
      const targetY = (yPercent/100) * img.height * mapScale;

      // set scroll so target is centered in wrap
      const scrollLeft = Math.max(0, targetX - (wrap.clientWidth/2));
      const scrollTop = Math.max(0, targetY - (wrap.clientHeight/2));
      wrap.scrollTo({left:scrollLeft,top:scrollTop,behavior:'smooth'});
    }

    // dark mode toggle
    const darkSwitch = document.getElementById('darkSwitch');
    darkSwitch.addEventListener('click',()=>{
      const root = document.documentElement;
      const on = darkSwitch.classList.toggle('on');
      darkSwitch.setAttribute('aria-pressed', on ? 'true' : 'false');
      if(on) document.documentElement.classList.add('dark'); else document.documentElement.classList.remove('dark');
    });

    // accessibility: Enter on selects submits
    Array.from(document.querySelectorAll('select')).forEach(s=>s.addEventListener('keydown',(e)=>{if(e.key==='Enter'){e.preventDefault();form.requestSubmit()}}))

  </script>
</body>
</html>


